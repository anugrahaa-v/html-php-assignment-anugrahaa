<?php
$name = $email = $message = "";
$errors = [];

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    if (empty($_POST["name"])) $errors['name'] = "Name required";
    else $name = htmlspecialchars(trim($_POST["name"]));

    if (empty($_POST["email"])) $errors['email'] = "Email required";
    elseif (!filter_var($_POST["email"], FILTER_VALIDATE_EMAIL)) $errors['email'] = "Invalid email";
    else $email = htmlspecialchars(trim($_POST["email"]));

    if (empty($_POST["message"])) $errors['message'] = "Message required";
    else $message = htmlspecialchars(trim($_POST["message"]));

    if (empty($errors)) {
        echo "<h3>Thank you, $name!</h3><p>We will contact you at <b>$email</b>.</p>";
        exit;
    }
}
?>

<form method="post">
    Name:<br><input type="text" name="name" value="<?= $name ?>"><br><?= $errors['name'] ?? '' ?><br>
    Email:<br><input type="text" name="email" value="<?= $email ?>"><br><?= $errors['email'] ?? '' ?><br>
    Message:<br><textarea name="message"><?= $message ?></textarea><br><?= $errors['message'] ?? '' ?><br>
    <button type="submit">Send</button>
</form>
